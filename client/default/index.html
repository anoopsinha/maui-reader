  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/theme.css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link rel="stylesheet" href="css/jquery.mobile-1.0.1.css" />
  <script src="lib/jquery-1.6.4.js"></script>
  <script src="lib/jquery.mobile-1.0.1.js">

  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript" src="js/prefs.js"></script>
  <script type="text/javascript" src="js/init.js"></script>
  <script type="text/javascript" src="js/util.js"></script>


<script type="text/javascript" src="/local/path/to/firebug-lite.js"></script>

<script src="speakGenerator.js"></script>
<script src="speakClient.js"></script>


<style type="text/css">

.highlight {
  background-color:yellow;
}

</style>

<script type="text/javascript">

function changePage(pageN, incr) {
    p = parseInt(pageN.substring(4)) + incr;   // format: page###
    if ($("#page" + p).length > 0) { // page exists
       transitionType = (incr < 0);
       $.mobile.changePage("#page"+p, { transition: "slide", reverse: transitionType}); 
    }
}


function hiliter(word, element) {
    var rgxp = new RegExp(word, 'g');
    var repl = '<span class="highlight">' + word + '</span>';
    element.html(element.html().replace(rgxp, repl));
}

function unhiliter(element) {
    var accom = element.clone().find('span').replaceWith(function() { return this.innerHTML; }).end().html();
    element.html(accom);
}




function hiliteNthWord(n, element) {
    var split = element.html().split(' ');
    var maxN = split.length;
    var word = split[n];
    if (n < split.length) {
       split[n] = '<span class="highlight">' + split[n] + '</span>';
       speak(word);
    } 
    element.html(split.join(' '));
    return maxN;
}


function highLightNextWord(n, speed) {
    unhiliter($("#content p"));
    var maxN = hiliteNthWord(n, $("#content p"));
    if (n < maxN) {
        setTimeout(function() {highLightNextWord(n + 1, speed);}, speed);
    }
}


$(function() {


    // SWIPE LEFT EVENT
    // Triggers when a swipe event occurred moving in the left direction.
    // Triggers when a horizontal drag of 30px or more (and less than 20px vertically) occurs within 1 second duration.
    // A standard 'swipe' can be used to trigger event regardless of direction
    $(".page").bind('swipeleft',function(event, ui){
        changePage($(this).attr("id"),1);
    })
    // SWIPE RIGHT EVENT
    // Triggers when a swipe event occurred moving in the right direction.
    $(".page").bind('swiperight',function(event, ui){
        changePage($(this).attr("id"),-1);
    })
    // TAP HOLD
    // Triggers after a held complete touch event (close to one second).
    // A standard 'tap' event is also avliable that triggers after a quick complete touch event.
    $(".page").bind('taphold',function(event, ui){
        changePage($(this).attr("id"),0);
    })

    $(".page").click(function(e){
       highLightNextWord(0, 800);
    })

});

</script>

<div id="audio"></div>

<div data-role="page" class="page" id="page1">
 
    <div data-role="header">
        <h1>Legos !</h1>
    </div><!-- /header -->
 
    <div data-role="content" id="content">

      <img src="img/lego_space_uni.jpg" />

      <p>Teenagers launch Lego man into space
Two Canadian students find Internet fame after a viral video showcases their $400 science project. How they did it</p>

    </div><!-- /content -->
 
    <div data-role="footer">
        <h4>1</h4>
    </div><!-- /footer -->
</div><!-- /page -->


<div data-role="page" class="page" id="page2">
 
    <div data-role="header">
        <h1>Cheetah</h1>
    </div><!-- /header -->
 
    <div data-role="content">

      <img src="img/cheetah-unified.jpg" />

      Cheetahs ride shotgun on road trips
Big cats from the Cincinnati Zoo aren't caged and ride in the front seat when making visits. Their destination

    </div><!-- /content -->
 
    <div data-role="footer">
        <h4>2</h4>
    </div><!-- /footer -->
</div><!-- /page -->


<div data-role="page" class="page" id="page3">
 
    <div data-role="header">
        <h1>Windows Grab</h1>
    </div><!-- /header -->
 
    <div data-role="content">

      <img src="img/windowsgrab_uni.jpg" />

      Big changes coming in Windows 8
The next Microsoft operating system will feature a whole new look and feel. Why you shouldn't rush to upgrade

    </div><!-- /content -->
 
    <div data-role="footer">
        <h4>3</h4>
    </div><!-- /footer -->
</div><!-- /page -->


